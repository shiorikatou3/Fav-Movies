<%= render "layouts/jumbotron" %>
<div class="container mt-4 mb-4">
  <h4 class="text-center mt-4 mb-5">『<%= @review.caption %>』<%= @review.user.name %>さんのレビュー</h4>
</div>


<div class="d-flex justify-content-center">  
  <div class="card" style="width: 700px;">
    <h6 class="card-title text-center mt-3">「<%= @review.genre.name =%>」の映画</h6>
    <div class="d-flex justify-content-center">
      <div class="card border border-0" style="width: 500px;">
        <div class="card-body">
          <div class="media">
            <div class="media-left media-top">
              <div class="mr-2 rounded media-object">
                <% if @review.user.image? %>                                                              
                  <%= image_tag @review.user.image.url, size: "100x100" %>
                <% else %>
                  100x100
                <% end %>
              </div>
            </div>
            <div class="media-body">
              <p><%= @review.user.name %>@<%= @review.user.favmoviesid %></br>
              <small class="text-muted"><%= @review.updated_at.strftime("%Y-%m-%d") %></small></p>
            </div>
          </div>
          <h5 class="card-text"><%= @review.caption %></h5>
          <p class="card-text"><%= @review.content %></p>
        </div>
      </div>
      <div class="card border border-0" style="width: 200px;">
        <div class="card-body">
          <div class="card-text" style="width: 149px; height: 210px;" >
            <% if @review.image? %>                                                              
              <%= image_tag @review.image.url, size: "149x210" %>
            <% else %>
              作品画像
            <% end %>
          </div>
          <div class="card-text"><%= @review.movietitle %></div>
        </div>
      </div>
    </div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item"><%= render "favorites/favorite_button", review: @review %></li>
      <li class="list-group-item">コメント</li>
      <li class="list-group-item">
        <div class="comment-form">
          <%= form_with(model: @comment, url: review_comments_path(@review), local: true) do |f| %>
            <div class="field">
              <%= f.text_area :content %>
            </div>
              <%= f.submit "コメントする", class: "btn btn-primary" %>
          <% end %>
        </div>
      </li>
    </ul>
  </div>
  
  <div class="card" style="width: 300px;">
    <h6 class="card-title text-center mt-3"><%= @review.movietitle =%></h6>
    <div class="card-body">
      <div class="card-text">公開日：<%= @review.date %></div>
      <div class="card-text">製作国：<%= @review.country %></div>
      <div class="card-text">上映時間：<%= @review.time %></div>
      <div class="card-text">監督：<%= @review.director %></div>
      <div class="card-text">キャスト：<br><%= @review.cast %></div>
    </div>
  </div>
</div>


<% if current_user == @review.user %>
<div class="container p-0" style="width: 1000px;">
  <div class="d-flex justify-content-between mt-4 mb-4">
    <%= link_to "レビューを編集", edit_review_path(@review), class: "btn btn-primary" %>
    <%= link_to "x削除", @review, method: :delete, data: { confirm: "You sure?" }, class: 'btn btn-danger' %>
  </div>
</div>
<% end %>




<div>
  <% @review.comments.each do |comment| %>
    <p>
      <%= comment.content %>
    </p>
  <% end %>  
</div>